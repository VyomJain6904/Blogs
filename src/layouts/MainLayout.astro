---
import Base from "./BaseLayout.astro";
import NavBar from "../components/NavBar.astro";
import Banner from "../components/Banner.astro";

import WriteupsConfig from "../../geeklurk";
import Footer from "../components/Footer.astro";
import SideBar from "../components/SideBar.astro";

export interface Props {
    title?: string;
    subTitle?: string;
    bannerImage?: string;
    slug?: string;
}

const props = Astro.props;
const isHomePage = props.slug === "/";
---

<Base>
    <NavBar />

    {
        WriteupsConfig.bannerStyle == "LOOP" && (
            <Banner
                title={props.title}
                subTitle={props.subTitle}
                bannerImage={props.bannerImage}
                slug={props.slug}
            />
        )
    }

    <div class="main-container">
        <div
            class="flex flex-col xl:flex-row items-start justify-center xl:space-x-4 w-full"
        >
            {
                isHomePage && (
                    <div class="side-bar">
                        <SideBar />
                    </div>
                )
            }
            <div class="transition-leaving w-full space-y-8">
                <main class="content onload-animation">
                    <slot />
                </main>
                <Footer />
            </div>
        </div>
    </div>
</Base>

<style>
    .main-container {
        @apply w-full mx-auto px-3 md:px-6 my-10;
        max-width: 100%;
    }

    /* Responsive width management */
    @media (min-width: 768px) {
        .main-container {
            @apply px-8;
            width: 90%;
            margin-left: auto;
            margin-right: auto;
        }
    }

    @media (min-width: 1024px) {
        .main-container {
            @apply px-0;
            width: var(--page-width-lg);
        }
    }

    @media (min-width: 1280px) {
        .main-container {
            width: var(--page-width-xl);
        }
    }

    .side-bar {
        @apply w-full xl:w-auto xl:min-w-[280px] xl:flex-shrink-0;
    }

    .content {
        @apply w-full;
    }

    /* Ensure content takes remaining space on XL */
    @media (min-width: 1280px) {
        .content {
            @apply flex-1;
        }
    }
</style>
